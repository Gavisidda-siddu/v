{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medication Tracker - HealthConnect</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">HealthConnect</div>
            
            <div class="nav-links">
                <a href="{% url 'home' %}">ğŸ  Home</a>
                <a href="{% url 'appointment' %}">ğŸ“… Appointments</a>
                <a href="{% url 'medication' %}">ğŸ’Š Medications</a>
                <a href="{% url 'faq' %}">â“ FAQs</a>
                <a href="{% url 'bloodbank' %}">ğŸ©¸ Blood Bank</a>
                <a href="{% url 'consultation' %}">ğŸ“¹ Consultation</a>
                <a href="{% url 'records' %}">ğŸ“‹ Records</a>
                <a href="{% url 'chat' %}">ğŸ’¬ Chat</a>
            </div>
            
            <div class="profile-container">
                <button class="profile-icon" id="profile-icon">ğŸ‘¤</button>
                <div class="profile-dropdown" id="profile-dropdown">
                    <a href="profile.html">ğŸ“ View Profile</a>
                    <button onclick="handleUploadPhoto()">ğŸ“· Upload Photo</button>
                    <button class="logout-btn">ğŸšª Logout</button>
                </div>
            </div>
            
            <button class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobile-menu">
            <a href="{% url 'home' %}">ğŸ  Home</a>
            <a href="{% url 'appointment' %}">ğŸ“… Appointments</a>
            <a href="{% url 'medication' %}">ğŸ’Š Medications</a>
            <a href="{% url 'faq' %}">â“ FAQs</a>
            <a href="{% url 'bloodbank' %}">ğŸ©¸ Blood Bank</a>
            <a href="{% url 'consultation' %}">ğŸ“¹ Consultation</a>
            <a href="{% url 'records' %}">ğŸ“‹ Records</a>
            <a href="{% url 'chat' %}">ğŸ’¬ Chat</a>
            <a href="{% url 'profile' %}">ğŸ‘¤ Profile</a>
        </div>
    </nav>

    <div style="max-width: 800px; margin: 2rem auto; padding: 0 1rem;">
        <div class="card">
            <h2>ğŸ’Š Medication Tracker</h2>
            
            <form id="medication-form">
                <div class="form-group">
                    <label for="medicine-name">Medicine Name</label>
                    <input type="text" id="medicine-name" name="medicine-name" required>
                </div>
                
                <div class="form-group">
                    <label for="dosage">Dosage</label>
                    <input type="text" id="dosage" name="dosage" placeholder="e.g., 500mg, 1 tablet" required>
                </div>
                
                <div class="form-group">
                    <label for="reminder-time">Reminder Time</label>
                    <input type="time" id="reminder-time" name="reminder-time" required>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%;">Add Medication</button>
            </form>
        </div>

        <div id="medications-list" style="margin-top: 2rem;"></div>
    </div>

    <!-- Floating Action Buttons -->
    <div class="floating-buttons">
        <button class="floating-btn callback-button" onclick="window.location.href='callback.html'" title="Request Callback">ğŸ“</button>
        <button class="floating-btn sos-button" onclick="window.location.href='sos.html'" title="Emergency SOS">ğŸš¨</button>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const medicationForm = document.getElementById('medication-form');
        if (medicationForm) {
            medicationForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const medicineName = document.getElementById('medicine-name').value;
                const dosage = document.getElementById('dosage').value;
                const time = document.getElementById('reminder-time').value;
                if (medicineName && dosage && time) {
                    await saveMedication({ name: medicineName, dosage: dosage, time: time });
                    await displayMedications();
                    this.reset();
                    alert('Medication added successfully!');
                }
            });
        }
        displayMedications();
    });
    </script>
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>

