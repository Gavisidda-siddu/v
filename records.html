{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Records - HealthConnect</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">HealthConnect</div>
            
            <div class="nav-links">
                <a href="index.html">ğŸ  Home</a>
                <a href="appointment.html">ğŸ“… Appointments</a>
                <a href="medication.html">ğŸ’Š Medications</a>
                <a href="faq.html">â“ FAQs</a>
                <a href="bloodbank.html">ğŸ©¸ Blood Bank</a>
                <a href="consultation.html">ğŸ“¹ Consultation</a>
                <a href="records.html">ğŸ“‹ Records</a>
                <a href="chat.html">ğŸ’¬ Chat</a>
            </div>
            
            <div class="profile-container">
                <button class="profile-icon" id="profile-icon">ğŸ‘¤</button>
                <div class="profile-dropdown" id="profile-dropdown">
                    <a href="profile.html">ğŸ“ View Profile</a>
                    <button onclick="handleUploadPhoto()">ğŸ“· Upload Photo</button>
                    <button class="logout-btn">ğŸšª Logout</button>
                </div>
            </div>
            
            <button class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobile-menu">
            <a href="index.html">ğŸ  Home</a>
            <a href="appointment.html">ğŸ“… Appointments</a>
            <a href="medication.html">ğŸ’Š Medications</a>
            <a href="faq.html">â“ FAQs</a>
            <a href="bloodbank.html">ğŸ©¸ Blood Bank</a>
            <a href="consultation.html">ğŸ“¹ Consultation</a>
            <a href="records.html">ğŸ“‹ Records</a>
            <a href="chat.html">ğŸ’¬ Chat</a>
            <a href="profile.html">ğŸ‘¤ Profile</a>
        </div>
    </nav>

    <div style="max-width: 1200px; margin: 2rem auto; padding: 0 1rem;">
        <h1 style="text-align: center; color: #4A90E2; margin-bottom: 2rem;">ğŸ“‹ Your Medical Records</h1>
        
        <div class="table-container">
            <h3 style="margin-bottom: 1.5rem;">My Booked Appointments</h3>
            <div id="user-appointments-list"></div>
            <table id="appointments-table" style="display: none;">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Department</th>
                        <th>Patient Info</th>
                        <th>Time</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="appointments-tbody">
                </tbody>
            </table>
        </div>
        
        <div class="table-container" style="margin-top: 2rem;">
            <h3 style="margin-bottom: 1.5rem;">Completed Appointments History</h3>
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Doctor</th>
                        <th>Department</th>
                        <th>Diagnosis</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2023-12-10</td>
                        <td>Dr. Michael Chen</td>
                        <td>Cardiology</td>
                        <td>ECG Exam - Normal</td>
                        <td style="color: #52C41A;">âœ“ Completed</td>
                    </tr>
                    <tr>
                        <td>2023-11-05</td>
                        <td>Dr. Emily Rodriguez</td>
                        <td>Dermatology</td>
                        <td>Skin Examination</td>
                        <td style="color: #52C41A;">âœ“ Completed</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="table-container" style="margin-top: 2rem;">
            <h3 style="margin-bottom: 1.5rem;">Lab Results</h3>
            <table>
                <thead>
                    <tr>
                        <th>Test Name</th>
                        <th>Date</th>
                        <th>Result</th>
                        <th>Status</th>
                        <th>View</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Blood Test</td>
                        <td>2024-01-10</td>
                        <td>Within Normal Range</td>
                        <td style="color: #52C41A;">Normal</td>
                        <td><button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.4rem 0.8rem;">View</button></td>
                    </tr>
                    <tr>
                        <td>X-Ray Chest</td>
                        <td>2023-12-08</td>
                        <td>Clear</td>
                        <td style="color: #52C41A;">Normal</td>
                        <td><button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.4rem 0.8rem;">View</button></td>
                    </tr>
                    <tr>
                        <td>Ultrasound</td>
                        <td>2023-11-15</td>
                        <td>Normal</td>
                        <td style="color: #52C41A;">Normal</td>
                        <td><button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.4rem 0.8rem;">View</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="card" style="margin-top: 2rem;">
            <h3>Prescription History</h3>
            <div style="margin-top: 1rem;">
                <div style="background: #E6F2FF; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <p><strong>Date:</strong> 2024-01-15</p>
                    <p><strong>Prescribed by:</strong> Dr. Sarah Johnson</p>
                    <p><strong>Medications:</strong> Vitamin D3 (1000 IU), Multivitamin</p>
                </div>
                <div style="background: #E6F2FF; padding: 1rem; border-radius: 8px;">
                    <p><strong>Date:</strong> 2023-12-10</p>
                    <p><strong>Prescribed by:</strong> Dr. Michael Chen</p>
                    <p><strong>Medications:</strong> Aspirin (75mg daily)</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Display user's appointments from localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const appointments = getAppointments();
            const container = document.getElementById('user-appointments-list');
            const table = document.getElementById('appointments-table');
            const tbody = document.getElementById('appointments-tbody');
            
            if (appointments.length > 0) {
                table.style.display = 'table';
                tbody.innerHTML = appointments.map(appt => `
                    <tr>
                        <td>${appt.date}</td>
                        <td>${appt.department}</td>
                        <td>${appt.name} (Age: ${appt.age}, ${appt.gender})</td>
                        <td>${appt.time}</td>
                        <td style="color: #4A90E2;">â— Scheduled</td>
                    </tr>
                `).join('');
            } else {
                container.innerHTML = '<p style="text-align: center; color: #666;">No upcoming appointments.</p>';
            }
        });
    </script>
    
    <!-- Floating Action Buttons -->
    <div class="floating-buttons">
        <button class="floating-btn callback-button" onclick="window.location.href='callback.html'" title="Request Callback">ğŸ“</button>
        <button class="floating-btn sos-button" onclick="window.location.href='sos.html'" title="Emergency SOS">ğŸš¨</button>
    </div>
    
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>

